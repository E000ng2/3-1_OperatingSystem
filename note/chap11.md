# 파일 시스템 관리
## 1. 파일 시스템과 저장 장치
- 파일과 저장 장치
  - 파일 
      
      사용자/ 응요 프로그램 : 정보를 저장하고 관리하는 논리적 단위
      
      컴퓨터 시스템 : 정보를 저장하는 컨테이너, 0과 1의 데이터 덩어리

  - 운영체제

      파일 생생, 기록, 읽기 모든 과정 통제

- 디스크 장치
  - 매체 모듈
    - 플래터 (platter)
    - 헤드 (head)
  - 제어 모듈
    - 프로세서
    - 디스크 캐시

- 파일 입출력 주소
  - 디스크 : 디스크 물리 주소
    - CHS(Cyliner-head-sector) 물리 주소
  - 운영 체제 : 논리 블럭 주소
    - 논리 주소(Logical Block Address, LBA)
  - 응용프로그램 : 파일 내 바이트 주소
    - 옵셋
  
- 파일 주소 변환

  - 파일 내 바이트 주소 -> 논리 블록 주소 -> CHS 물리 주소
  - 운영체제는 파일 내 바이트 주소를 논리 블록 주소로 변환
  - 디스크 장치의 펌웨어가 논리 블록 주소를 CHS 물리 주소로 변환

- 주소 계층화 의미
  - 각 계층의 독립적 구현이 용이
  - 응용프로그램 개발/ 운영체제 개발/ 저장 장치(디스크 장치) 개발

- 파일 시스템 
  - 저장 매체에 파일을 생성하고 저장하고 읽고 쓰는 운영체제의 기능을 통칭
  -  파일 시스템의 학습 범위
    
     1. 파일 시스템의 논리 구조 
     2. 저장소에 파일 시스템 구축
     3. 커널 내 파일 입출력 구현
     4. 응용프로그램을 위한 시스템 호출 제공

```
파일 읽기에서 각 계층의 역학이 잘 구분됨

운영체제는 응용프로그램이 저장장치의 종류, 구조, 위치 등 물리적이느 특성에 무관하게 입출력 지원

디스크 디바이스 드라이버가 파일에 대한 논리적인 공간과 물리적인 공간 분리

파일 데이터는 여러번의 복사를 거쳐 이동
    디스크 플레터 -> 디스크 캐시 -> 커널의 버퍼 캐시 -> 라이브러리의 버퍼 -> 응용프로그램 버퍼
    여러 응용프로그램들이 동일한 파일을 액세스 하는 경우 효과적
    한 프로그램이 순차적으로 파일 데이터를 읽는 경우 효과적
```

## 2. 파일 시스템의 목적 및 주요 구성 요소들
- 파일의 개념
  - 파일 = 연속된 논리 주소 공간
  - 파일 종류 
    - 데이터 파일 : 숫자, 문자, 바이너리
    - 프로그램 파일 : 실행 코드
  - 파일 내용
    - 생성자가 정의
    - 텍스트 파일, 소스 파일, 실행 파일
  
- 파일 속성
  - 이름(Name) : 사람이 읽을 수 있는 이름
  - 식별자(Identifier) : 고유한 숫자 태그
  - 유형(Type) : 다양한 파일 유형 지원
  - 위치(Location) : 디스크 상 위치를 가리키는 포인터
  - 크기(Size) : 현재 파일 크기
  - 보호(Protection) : 접근 제어(일기, 쓰기, 실행)
  - 시간/날짜/사용자 ID : 보안 및 사용 추적용
  - 모든 파일 정보는 디렉터리 구조에 저장

- 파일 연산
  - 생성(Create), 읽기(Read), 쓰기(Write), 삭제(Delete), 위치 이동(Seek), 잘라내기(Truncate)
  - Open(Fi) : 디스크에서 디렉터리 항목을 찾아 메모리로 복사
  - Close(Fi) : 메모리에서 디렉터리 항목을 디스크로 되돌림


- 열린 파일 관리

    운영 체제가 유지

  - Open-file table : 열린 파일 추적
  - File pointer : 마지막 읽기/쓰기 위치
  - 파일 오픈 카운트 : 파일이 열려있는 횟수(닫힐 때 삭제 여부 결정)
  - 디스크 위치 캐시 : 빠른 접근 위헤
  - 접근 권한 정보 

- 파일 구조
  - 구조 없음 : 단순 바이트/ 단어 배열
  - 간단한 레코드 구조 : 고정 길이 / 가변 길이
  - 